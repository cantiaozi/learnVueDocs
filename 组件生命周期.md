一、生命周期

vue在执行的过程中，内部是通过callHook方法调用各个生命周期的。callHook方法定义在core/instance/lifecycle.js中。

```JavaScript
export function callHook (vm: Component, hook: string) {
  // #7573 disable dep collection when invoking lifecycle hooks
  pushTarget()
  const handlers = vm.$options[hook]
  if (handlers) {
    for (let i = 0, j = handlers.length; i < j; i++) {
      try {
        handlers[i].call(vm)
      } catch (e) {
        handleError(e, vm, `${hook} hook`)
      }
    }
  }
  if (vm._hasHookEvent) {
    vm.$emit('hook:' + hook)
  }
  popTarget()
}
```

1.beforeCreate和created

beforeCreate和created钩子函数都是在_init函数中执行的。beforeCreate钩子中是无法获取data等响应式数据的。因为响应式数据的初始化是在initState方法中完成的，在beforeCreate钩子钩子调用后执行。（实际上在beforeCreate钩子中，也可以通过$options对象拿到data等数据，但是这不是官方推荐的做法）

```JavaScript
Vue.prototype._init = function (options?: Object) {
    const vm: Component = this
    
    if (options && options._isComponent) {
      initInternalComponent(vm, options)
    } else {
      vm.$options = mergeOptions(
        resolveConstructorOptions(vm.constructor),
        options || {},
        vm
      )
    }
    /* istanbul ignore else */
    if (process.env.NODE_ENV !== 'production') {
      initProxy(vm)
    } else {
      vm._renderProxy = vm
    }
    // expose real self
    vm._self = vm
    initLifecycle(vm)
    initEvents(vm)
    initRender(vm)
    callHook(vm, 'beforeCreate')
    initInjections(vm) // resolve injections before data/props
    initState(vm)
    initProvide(vm) // resolve provide after data/props
    callHook(vm, 'created')

    if (vm.$options.el) {
      vm.$mount(vm.$options.el)
    }
  }
```

